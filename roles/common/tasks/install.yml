---
- name: Install common deb packages
  apt:
    name:
    - aptitude
    - net-tools
    - xz-utils
    - python3-apt
    - python3-gpg
    - openjdk-11-jdk
    - keepassx
    - geany
    - git
    - tig
    - vim
    - htop
    - mc
    - whois
    - curl
    - network-manager-openvpn-gnome
    - mokutil
    - software-properties-common
    - nodejs
    - npm
    - nmap
    - xclip
    state: latest
    update_cache: true

- name: install pip packages
  pip:
    name:
    - openshift
    - yamllint
    - github3.py
    - dnspython
    - netaddr
    - pre-commit
    state: latest

- name: Install snap packages
  snap:
    name:
    - pycharm-community
    - slack
    - kubectl
    - helm
    - jq
    - yq
    - go
    classic: yes
    state: present

- name: "Check Skype is installed"
  command: "dpkg-query -W skypeforlinux"
  register: skype_check
  failed_when: skype_check.rc > 1
  changed_when: skype_check.rc == 1
  ignore_errors: True

- name: Install Skype package
  apt:
    deb: "https://repo.skype.com/latest/skypeforlinux-64.deb"
    state: present
  when: skype_check.rc == 1

# TODO: install dropbox
